# Default values for moneytree.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.
dependencies:
  miraclegrow:
    enable: true
  postgresql:
    enable: true
  grafana:
    enable: true

moneytree:
  # Don't take fees into account when calculating spread
  disableFees: false
  # Force orders to reject if they'd be a taker order
  forceMakerOrders: true
  # Enable debug logging
  enableDebugLogs: true
  # Maximum number of orders that the system will keep open before rotating them
  maxOpenPairs: 4
  # Percentage return to target
  targetReturn: 0.001

  coinbase:
    # Forces the app to use the sandbox
    useSandbox: true

    # Coinbase Credentials
    key: YOUR COINBASE PRO KEY
    passphrase: YOUR COINBASE PASSPHRASE
    secret: YOUR COINBASE SECRET
  
  postgresql:
    database: moneytree
    password: password

  image:
    repository: hub.sinimini.com/docker/moneytree
    pullPolicy: Always
    # Overrides the image tag whose default is the chart appVersion.
    tag: latest

  imagePullSecrets: []
  nameOverride: ""
  fullnameOverride: ""

  service:
    type: ClusterIP
    port: 44444
    clusterIP:

  serviceAccount:
    # Specifies whether a service account should be created
    create: true
    # Annotations to add to the service account
    annotations: {}
    # The name of the service account to use.
    # If not set and create is true, a name is generated using the fullname template
    name: ""

  podAnnotations: {}

  podSecurityContext: {}
    # fsGroup: 2000

  securityContext: {}

  resources: {}
    # We usually recommend not to specify default resources and to leave this as a conscious
    # choice for the user. This also increases chances charts run on environments with little
    # resources, such as Minikube. If you do want to specify resources, uncomment the following
    # lines, adjust them as necessary, and remove the curly braces after 'resources:'.
    # limits:
    #   cpu: 100m
    #   memory: 128Mi
    # requests:
    #   cpu: 100m
    #   memory: 128Mi

  nodeSelector: {}

  tolerations: []

  affinity: {}

postgresql:
  postgresqlPassword: password
  postgresqlDatabase: moneytree

grafana:
  adminPassword: password
  rbac:
    create: no
    pspEnabled: no
  datasources:
    datasources.yaml:
      apiVersion: 1
      datasources:
      - name: Postgres
        type: postgres
        isDefault: yes
        url: moneytree-postgresql:5432
        database: moneytree
        user: postgres
        secureJsonData:
          password: password
        jsonData:
          sslmode: "disable" # disable/require/verify-ca/verify-full
          maxOpenConns: 0         # Grafana v5.4+
          maxIdleConns: 2         # Grafana v5.4+
          connMaxLifetime: 14400  # Grafana v5.4+
          postgresVersion: 1200 # 903=9.3, 904=9.4, 905=9.5, 906=9.6, 1000=10
          timescaledb: false
  dashboardProviders:
    dashboardproviders.yaml:
      apiVersion: 1
      providers:
      - name: 'default'
        orgId: 1
        folder: ''
        type: file
        disableDeletion: false
        editable: true
        options:
          path: /var/lib/grafana/dashboards/default
  dashboards:
    default:
      orders:
        json: |
          {
            "annotations": {
              "list": [
                {
                  "builtIn": 1,
                  "datasource": "-- Grafana --",
                  "enable": true,
                  "hide": true,
                  "iconColor": "rgba(0, 211, 255, 1)",
                  "limit": 100,
                  "name": "Annotations & Alerts",
                  "showIn": 0,
                  "type": "dashboard"
                }
              ]
            },
            "editable": true,
            "gnetId": null,
            "graphTooltip": 0,
            "links": [],
            "panels": [
              {
                "datasource": null,
                "fieldConfig": {
                  "defaults": {
                    "custom": {
                      "align": null
                    },
                    "decimals": 2,
                    "mappings": [],
                    "thresholds": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "semi-dark-red",
                          "value": null
                        },
                        {
                          "color": "semi-dark-green",
                          "value": 0
                        }
                      ]
                    },
                    "unit": "currencyUSD"
                  },
                  "overrides": [
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "uuid"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 340
                        }
                      ]
                    }
                  ]
                },
                "gridPos": {
                  "h": 6,
                  "w": 6,
                  "x": 0,
                  "y": 0
                },
                "id": 34,
                "options": {
                  "colorMode": "value",
                  "graphMode": "area",
                  "justifyMode": "auto",
                  "orientation": "auto",
                  "reduceOptions": {
                    "calcs": [
                      "sum"
                    ],
                    "fields": "",
                    "values": false
                  },
                  "textMode": "auto"
                },
                "pluginVersion": "7.3.5",
                "targets": [
                  {
                    "format": "table",
                    "group": [],
                    "metricColumn": "none",
                    "rawQuery": true,
                    "rawSql": "-- Start with general gains\nselect\n  sum(\"totalReturn\") as amount\nfrom (\n select\n    \"uuid\",\n    \"createdAt\",\n    \"endedAt\",\n    \"status\",\n    \"direction\",\n    case when \"buyPrice\" <> '0' then \"buyPrice\" end as \"buyPrice\",\n    case when \"sellPrice\" <> '0' then \"sellPrice\" end as \"sellPrice\",\n    case when \"revPrice\" <> '0' then \"revPrice\" end as \"revPrice\",\n    case when \"buyQty\" <> '0' then \"buyQty\" end as \"buyQty\",\n    case when \"sellQty\" <> '0' then \"sellQty\" end as \"sellQty\",\n    case when \"revFunds\" <> '0' then \"revFunds\" end as \"revFunds\",\n    case when \"buyFilled\" <> '0' then \"buyFilled\" end as \"buyFilled\",\n    case when \"sellFilled\" <> '0' then \"sellFilled\" end as \"sellFilled\",\n    case when \"revFilled\" <> '0' then \"revFilled\" end as \"revFilled\",\n    case when \"btcReturn\"<> '0' then \"btcReturn\" end as \"btcReturn\",\n    case when (\"btcReturn\" * \"firstPrice\") <> '0' then (\"btcReturn\" * \"firstPrice\") end as \"btcUsdReturn\",\n    case when \"usdReturn\" <> '0' then \"usdReturn\" end as \"usdReturn\",\n    case when \"fees\" <> '0' then \"fees\" end as \"fees\",\n    case when (\"usdReturn\") + (\"btcReturn\" * \"firstPrice\") - fees <> 0 then (\"usdReturn\") + (\"btcReturn\" * \"firstPrice\") - fees end as \"totalReturn\"\nfrom (\n    select\n        *,\n        case \n            when \"status\" = 'SUCCESS' then \"buyFilled\" - \"sellFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'DOWN' then \"revFilled\" - \"buyFilled\" - \"sellFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'UP' then \"buyFilled\" - \"sellFilled\" - \"revFilled\"\n            else 0\n        end as \"btcReturn\",\n        case \n            when \"status\" = 'SUCCESS' then \"sellPrice\" * \"sellFilled\" - \"buyPrice\" * \"buyFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'DOWN' then (\"sellPrice\" * \"sellFilled\" - \"buyPrice\" * \"buyFilled\") - \"revPrice\" * \"revFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'UP' then (\"revPrice\" * \"revFilled\") - ABS(\"sellPrice\" * \"sellFilled\" - \"buyPrice\" * \"buyFilled\")\n            else 0\n        end as \"usdReturn\"\n    from (\n        select\n            *,\n            case when \"direction\" = 'UP' then \"firstStatus\" else \"secondStatus\" end as \"buyStatus\",\n            case when \"direction\" = 'UP' then \"firstPrice\" else \"secondPrice\" end as \"buyPrice\",\n            case when \"direction\" = 'UP' then \"firstQty\" else \"secondQty\" end as \"buyQty\",\n            case when \"direction\" = 'UP' then \"firstFilled\" else \"secondFilled\" end as \"buyFilled\",\n            case when \"direction\" = 'UP' then \"firstFees\" else \"secondFees\" end as \"buyFees\",\n            \n            case when \"direction\" = 'DOWN' then \"firstStatus\" else \"secondStatus\" end as \"sellStatus\",\n            case when \"direction\" = 'DOWN' then \"firstPrice\" else \"secondPrice\" end as \"sellPrice\",\n            case when \"direction\" = 'DOWN' then \"firstQty\" else \"secondQty\" end as \"sellQty\",\n            case when \"direction\" = 'DOWN' then \"firstFilled\" else \"secondFilled\" end as \"sellFilled\",\n            case when \"direction\" = 'DOWN' then \"firstFees\" else \"secondFees\" end as \"sellFees\",\n            \"firstFees\" + \"secondFees\" + \"revFees\" as \"fees\"\n        from (\n            select \n                uuid,\n                data->>'createdAt' as \"createdAt\", \n                case when data->>'endedAt' = '0001-01-01T00:00:00Z' then '' else data->>'endedAt' end as \"endedAt\",\n                data->>'direction' as \"direction\",\n                data->>'status' as \"status\",\n                data->'firstOrder'->>'status' as \"firstStatus\",\n                data->'secondOrder'->>'status' as \"secondStatus\",\n                data->'reversalOrder'->>'status' as \"revStatus\",\n                (data->'firstRequest'->>'price')::decimal as \"firstPrice\",\n                (data->'secondRequest'->>'price')::decimal as \"secondPrice\",\n                (data->'reversalOrder'->'request'->>'price')::decimal as \"revPrice\",\n                (data->'firstRequest'->>'quantity')::decimal as \"firstQty\",\n                (data->'secondRequest'->>'quantity')::decimal as \"secondQty\",\n                (data->'reversalRequest'->>'funds')::decimal as \"revFunds\",\n                (data->'firstOrder'->>'filled')::decimal as \"firstFilled\",\n                (data->'secondOrder'->>'filled')::decimal as \"secondFilled\",\n                (data->'reversalOrder'->>'filled')::decimal as \"revFilled\",\n                (data->'reversalOrder'->>'fees')::decimal as \"revFees\",\n                (data->'secondOrder'->>'fees')::decimal as \"secondFees\",\n                (data->'firstOrder'->>'fees')::decimal as \"firstFees\"\n            from \n                orderpairs \n        ) as pairs\n    ) as \"pairsWithReturns\"\n) as pairReturns\n\nWHERE $__timeFilter(GREATEST(\"createdAt\", \"endedAt\"))\n) as btc\n\n-- Add zero at the end to give something to select when nothing exists\nUNION ALL\n\nselect\n  0 as amount\n\n",
                    "refId": "A",
                    "select": [
                      [
                        {
                          "params": [
                            "value"
                          ],
                          "type": "column"
                        }
                      ]
                    ],
                    "timeColumn": "time",
                    "where": [
                      {
                        "name": "$__timeFilter",
                        "params": [],
                        "type": "macro"
                      }
                    ]
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Total Return (estimated)",
                "type": "stat"
              },
              {
                "datasource": null,
                "fieldConfig": {
                  "defaults": {
                    "custom": {
                      "align": null
                    },
                    "decimals": 2,
                    "mappings": [],
                    "thresholds": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "semi-dark-red",
                          "value": null
                        },
                        {
                          "color": "semi-dark-green",
                          "value": 0
                        }
                      ]
                    },
                    "unit": "currencyUSD"
                  },
                  "overrides": [
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "uuid"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 340
                        }
                      ]
                    }
                  ]
                },
                "gridPos": {
                  "h": 6,
                  "w": 6,
                  "x": 6,
                  "y": 0
                },
                "id": 38,
                "options": {
                  "colorMode": "value",
                  "graphMode": "area",
                  "justifyMode": "auto",
                  "orientation": "auto",
                  "reduceOptions": {
                    "calcs": [
                      "sum"
                    ],
                    "fields": "",
                    "values": false
                  },
                  "textMode": "auto"
                },
                "pluginVersion": "7.3.5",
                "targets": [
                  {
                    "format": "table",
                    "group": [],
                    "metricColumn": "none",
                    "rawQuery": true,
                    "rawSql": "-- Start with general gains\nselect\n  sum(\"usdReturn\") - sum(\"fees\") as amount\nfrom (\nselect\n    \"uuid\",\n    \"createdAt\",\n    \"endedAt\",\n    \"status\",\n    \"direction\",\n    case when \"buyPrice\" <> '0' then \"buyPrice\" end as \"buyPrice\",\n    case when \"sellPrice\" <> '0' then \"sellPrice\" end as \"sellPrice\",\n    case when \"revPrice\" <> '0' then \"revPrice\" end as \"revPrice\",\n    case when \"buyQty\" <> '0' then \"buyQty\" end as \"buyQty\",\n    case when \"sellQty\" <> '0' then \"sellQty\" end as \"sellQty\",\n    case when \"revFunds\" <> '0' then \"revFunds\" end as \"revFunds\",\n    case when \"buyFilled\" <> '0' then \"buyFilled\" end as \"buyFilled\",\n    case when \"sellFilled\" <> '0' then \"sellFilled\" end as \"sellFilled\",\n    case when \"revFilled\" <> '0' then \"revFilled\" end as \"revFilled\",\n    case when \"btcReturn\"<> '0' then \"btcReturn\" end as \"btcReturn\",\n    case when (\"btcReturn\" * \"firstPrice\") <> '0' then (\"btcReturn\" * \"firstPrice\") end as \"btcUsdReturn\",\n    case when \"usdReturn\" <> '0' then \"usdReturn\" end as \"usdReturn\",\n    case when \"fees\" <> '0' then \"fees\" end as \"fees\",\n    case when (\"usdReturn\") + (\"btcReturn\" * \"firstPrice\") - fees <> 0 then (\"usdReturn\") + (\"btcReturn\" * \"firstPrice\") - fees end as \"totalReturn\"\nfrom (\n    select\n        *,\n        case \n            when \"status\" = 'SUCCESS' then \"buyFilled\" - \"sellFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'DOWN' then \"revFilled\" - \"buyFilled\" - \"sellFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'UP' then \"buyFilled\" - \"sellFilled\" - \"revFilled\"\n            else 0\n        end as \"btcReturn\",\n        case \n            when \"status\" = 'SUCCESS' then \"sellPrice\" * \"sellFilled\" - \"buyPrice\" * \"buyFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'DOWN' then (\"sellPrice\" * \"sellFilled\" - \"buyPrice\" * \"buyFilled\") - \"revPrice\" * \"revFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'UP' then (\"revPrice\" * \"revFilled\") - ABS(\"sellPrice\" * \"sellFilled\" - \"buyPrice\" * \"buyFilled\")\n            else 0\n        end as \"usdReturn\"\n    from (\n        select\n            *,\n            case when \"direction\" = 'UP' then \"firstStatus\" else \"secondStatus\" end as \"buyStatus\",\n            case when \"direction\" = 'UP' then \"firstPrice\" else \"secondPrice\" end as \"buyPrice\",\n            case when \"direction\" = 'UP' then \"firstQty\" else \"secondQty\" end as \"buyQty\",\n            case when \"direction\" = 'UP' then \"firstFilled\" else \"secondFilled\" end as \"buyFilled\",\n            case when \"direction\" = 'UP' then \"firstFees\" else \"secondFees\" end as \"buyFees\",\n            \n            case when \"direction\" = 'DOWN' then \"firstStatus\" else \"secondStatus\" end as \"sellStatus\",\n            case when \"direction\" = 'DOWN' then \"firstPrice\" else \"secondPrice\" end as \"sellPrice\",\n            case when \"direction\" = 'DOWN' then \"firstQty\" else \"secondQty\" end as \"sellQty\",\n            case when \"direction\" = 'DOWN' then \"firstFilled\" else \"secondFilled\" end as \"sellFilled\",\n            case when \"direction\" = 'DOWN' then \"firstFees\" else \"secondFees\" end as \"sellFees\",\n            \"firstFees\" + \"secondFees\" + \"revFees\" as \"fees\"\n        from (\n            select \n                uuid,\n                data->>'createdAt' as \"createdAt\", \n                case when data->>'endedAt' = '0001-01-01T00:00:00Z' then '' else data->>'endedAt' end as \"endedAt\",\n                data->>'direction' as \"direction\",\n                data->>'status' as \"status\",\n                data->'firstOrder'->>'status' as \"firstStatus\",\n                data->'secondOrder'->>'status' as \"secondStatus\",\n                data->'reversalOrder'->>'status' as \"revStatus\",\n                (data->'firstRequest'->>'price')::decimal as \"firstPrice\",\n                (data->'secondRequest'->>'price')::decimal as \"secondPrice\",\n                (data->'reversalOrder'->'request'->>'price')::decimal as \"revPrice\",\n                (data->'firstRequest'->>'quantity')::decimal as \"firstQty\",\n                (data->'secondRequest'->>'quantity')::decimal as \"secondQty\",\n                (data->'reversalRequest'->>'funds')::decimal as \"revFunds\",\n                (data->'firstOrder'->>'filled')::decimal as \"firstFilled\",\n                (data->'secondOrder'->>'filled')::decimal as \"secondFilled\",\n                (data->'reversalOrder'->>'filled')::decimal as \"revFilled\",\n                (data->'reversalOrder'->>'fees')::decimal as \"revFees\",\n                (data->'secondOrder'->>'fees')::decimal as \"secondFees\",\n                (data->'firstOrder'->>'fees')::decimal as \"firstFees\"\n            from \n                orderpairs \n        ) as pairs\n    ) as \"pairsWithReturns\"\n) as pairReturns\n\nWHERE $__timeFilter(GREATEST(\"createdAt\", \"endedAt\"))\n) as btc\n\n-- Add zero at the end to give something to select when nothing exists\nUNION ALL\n\nselect\n  0 as amount\n\n",
                    "refId": "A",
                    "select": [
                      [
                        {
                          "params": [
                            "value"
                          ],
                          "type": "column"
                        }
                      ]
                    ],
                    "timeColumn": "time",
                    "where": [
                      {
                        "name": "$__timeFilter",
                        "params": [],
                        "type": "macro"
                      }
                    ]
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "USD Return (Less Fees)",
                "type": "stat"
              },
              {
                "datasource": null,
                "fieldConfig": {
                  "defaults": {
                    "custom": {
                      "align": null
                    },
                    "decimals": 2,
                    "mappings": [],
                    "thresholds": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "semi-dark-red",
                          "value": null
                        },
                        {
                          "color": "semi-dark-green",
                          "value": 0
                        }
                      ]
                    },
                    "unit": "currencyUSD"
                  },
                  "overrides": [
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "uuid"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 340
                        }
                      ]
                    }
                  ]
                },
                "gridPos": {
                  "h": 6,
                  "w": 6,
                  "x": 12,
                  "y": 0
                },
                "id": 36,
                "options": {
                  "colorMode": "value",
                  "graphMode": "area",
                  "justifyMode": "auto",
                  "orientation": "auto",
                  "reduceOptions": {
                    "calcs": [
                      "sum"
                    ],
                    "fields": "",
                    "values": false
                  },
                  "textMode": "auto"
                },
                "pluginVersion": "7.3.5",
                "targets": [
                  {
                    "format": "table",
                    "group": [],
                    "metricColumn": "none",
                    "rawQuery": true,
                    "rawSql": "-- Start with general gains\nselect\n  sum(\"btcUsdReturn\") as amount\nfrom (\n  select\n    \"uuid\",\n    \"createdAt\",\n    \"endedAt\",\n    \"status\",\n    \"direction\",\n    case when \"buyPrice\" <> '0' then \"buyPrice\" end as \"buyPrice\",\n    case when \"sellPrice\" <> '0' then \"sellPrice\" end as \"sellPrice\",\n    case when \"revPrice\" <> '0' then \"revPrice\" end as \"revPrice\",\n    case when \"buyQty\" <> '0' then \"buyQty\" end as \"buyQty\",\n    case when \"sellQty\" <> '0' then \"sellQty\" end as \"sellQty\",\n    case when \"revFunds\" <> '0' then \"revFunds\" end as \"revFunds\",\n    case when \"buyFilled\" <> '0' then \"buyFilled\" end as \"buyFilled\",\n    case when \"sellFilled\" <> '0' then \"sellFilled\" end as \"sellFilled\",\n    case when \"revFilled\" <> '0' then \"revFilled\" end as \"revFilled\",\n    case when \"btcReturn\"<> '0' then \"btcReturn\" end as \"btcReturn\",\n    case when (\"btcReturn\" * \"firstPrice\") <> '0' then (\"btcReturn\" * \"firstPrice\") end as \"btcUsdReturn\",\n    case when \"usdReturn\" <> '0' then \"usdReturn\" end as \"usdReturn\",\n    case when \"fees\" <> '0' then \"fees\" end as \"fees\",\n    case when (\"usdReturn\") + (\"btcReturn\" * \"firstPrice\") - fees <> 0 then (\"usdReturn\") + (\"btcReturn\" * \"firstPrice\") - fees end as \"totalReturn\"\nfrom (\n    select\n        *,\n        case \n            when \"status\" = 'SUCCESS' then \"buyFilled\" - \"sellFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'DOWN' then \"revFilled\" - \"buyFilled\" - \"sellFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'UP' then \"buyFilled\" - \"sellFilled\" - \"revFilled\"\n            else 0\n        end as \"btcReturn\",\n        case \n            when \"status\" = 'SUCCESS' then \"sellPrice\" * \"sellFilled\" - \"buyPrice\" * \"buyFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'DOWN' then (\"sellPrice\" * \"sellFilled\" - \"buyPrice\" * \"buyFilled\") - \"revPrice\" * \"revFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'UP' then (\"revPrice\" * \"revFilled\") - ABS(\"sellPrice\" * \"sellFilled\" - \"buyPrice\" * \"buyFilled\")\n            else 0\n        end as \"usdReturn\"\n    from (\n        select\n            *,\n            case when \"direction\" = 'UP' then \"firstStatus\" else \"secondStatus\" end as \"buyStatus\",\n            case when \"direction\" = 'UP' then \"firstPrice\" else \"secondPrice\" end as \"buyPrice\",\n            case when \"direction\" = 'UP' then \"firstQty\" else \"secondQty\" end as \"buyQty\",\n            case when \"direction\" = 'UP' then \"firstFilled\" else \"secondFilled\" end as \"buyFilled\",\n            case when \"direction\" = 'UP' then \"firstFees\" else \"secondFees\" end as \"buyFees\",\n            \n            case when \"direction\" = 'DOWN' then \"firstStatus\" else \"secondStatus\" end as \"sellStatus\",\n            case when \"direction\" = 'DOWN' then \"firstPrice\" else \"secondPrice\" end as \"sellPrice\",\n            case when \"direction\" = 'DOWN' then \"firstQty\" else \"secondQty\" end as \"sellQty\",\n            case when \"direction\" = 'DOWN' then \"firstFilled\" else \"secondFilled\" end as \"sellFilled\",\n            case when \"direction\" = 'DOWN' then \"firstFees\" else \"secondFees\" end as \"sellFees\",\n            \"firstFees\" + \"secondFees\" + \"revFees\" as \"fees\"\n        from (\n            select \n                uuid,\n                data->>'createdAt' as \"createdAt\", \n                case when data->>'endedAt' = '0001-01-01T00:00:00Z' then '' else data->>'endedAt' end as \"endedAt\",\n                data->>'direction' as \"direction\",\n                data->>'status' as \"status\",\n                data->'firstOrder'->>'status' as \"firstStatus\",\n                data->'secondOrder'->>'status' as \"secondStatus\",\n                data->'reversalOrder'->>'status' as \"revStatus\",\n                (data->'firstRequest'->>'price')::decimal as \"firstPrice\",\n                (data->'secondRequest'->>'price')::decimal as \"secondPrice\",\n                (data->'reversalOrder'->'request'->>'price')::decimal as \"revPrice\",\n                (data->'firstRequest'->>'quantity')::decimal as \"firstQty\",\n                (data->'secondRequest'->>'quantity')::decimal as \"secondQty\",\n                (data->'reversalRequest'->>'funds')::decimal as \"revFunds\",\n                (data->'firstOrder'->>'filled')::decimal as \"firstFilled\",\n                (data->'secondOrder'->>'filled')::decimal as \"secondFilled\",\n                (data->'reversalOrder'->>'filled')::decimal as \"revFilled\",\n                (data->'reversalOrder'->>'fees')::decimal as \"revFees\",\n                (data->'secondOrder'->>'fees')::decimal as \"secondFees\",\n                (data->'firstOrder'->>'fees')::decimal as \"firstFees\"\n            from \n                orderpairs \n        ) as pairs\n    ) as \"pairsWithReturns\"\n) as pairReturns\n\nWHERE $__timeFilter(GREATEST(\"createdAt\", \"endedAt\"))\n) as btc\n\n-- Add zero at the end to give something to select when nothing exists\nUNION ALL\n\nselect\n  0 as amount\n\n",
                    "refId": "A",
                    "select": [
                      [
                        {
                          "params": [
                            "value"
                          ],
                          "type": "column"
                        }
                      ]
                    ],
                    "timeColumn": "time",
                    "where": [
                      {
                        "name": "$__timeFilter",
                        "params": [],
                        "type": "macro"
                      }
                    ]
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "BTC Return (USD)",
                "type": "stat"
              },
              {
                "datasource": null,
                "fieldConfig": {
                  "defaults": {
                    "custom": {
                      "align": null
                    },
                    "decimals": 2,
                    "mappings": [],
                    "thresholds": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "semi-dark-green",
                          "value": null
                        },
                        {
                          "color": "semi-dark-red",
                          "value": 0
                        }
                      ]
                    },
                    "unit": "currencyUSD"
                  },
                  "overrides": [
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "uuid"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 340
                        }
                      ]
                    }
                  ]
                },
                "gridPos": {
                  "h": 6,
                  "w": 6,
                  "x": 18,
                  "y": 0
                },
                "id": 48,
                "options": {
                  "colorMode": "value",
                  "graphMode": "area",
                  "justifyMode": "auto",
                  "orientation": "auto",
                  "reduceOptions": {
                    "calcs": [
                      "sum"
                    ],
                    "fields": "",
                    "values": false
                  },
                  "textMode": "auto"
                },
                "pluginVersion": "7.3.5",
                "targets": [
                  {
                    "format": "table",
                    "group": [],
                    "metricColumn": "none",
                    "rawQuery": true,
                    "rawSql": "-- Start with general gains\nselect\n  sum(\"fees\") as amount\nfrom (\n  select\n    \"uuid\",\n    \"createdAt\",\n    \"endedAt\",\n    \"status\",\n    \"direction\",\n    case when \"buyPrice\" <> '0' then \"buyPrice\" end as \"buyPrice\",\n    case when \"sellPrice\" <> '0' then \"sellPrice\" end as \"sellPrice\",\n    case when \"revPrice\" <> '0' then \"revPrice\" end as \"revPrice\",\n    case when \"buyQty\" <> '0' then \"buyQty\" end as \"buyQty\",\n    case when \"sellQty\" <> '0' then \"sellQty\" end as \"sellQty\",\n    case when \"revFunds\" <> '0' then \"revFunds\" end as \"revFunds\",\n    case when \"buyFilled\" <> '0' then \"buyFilled\" end as \"buyFilled\",\n    case when \"sellFilled\" <> '0' then \"sellFilled\" end as \"sellFilled\",\n    case when \"revFilled\" <> '0' then \"revFilled\" end as \"revFilled\",\n    case when \"btcReturn\"<> '0' then \"btcReturn\" end as \"btcReturn\",\n    case when (\"btcReturn\" * \"firstPrice\") <> '0' then (\"btcReturn\" * \"firstPrice\") end as \"btcUsdReturn\",\n    case when \"usdReturn\" <> '0' then \"usdReturn\" end as \"usdReturn\",\n    case when \"fees\" <> '0' then \"fees\" end as \"fees\",\n    case when (\"usdReturn\") + (\"btcReturn\" * \"firstPrice\") - fees <> 0 then (\"usdReturn\") + (\"btcReturn\" * \"firstPrice\") - fees end as \"totalReturn\"\nfrom (\n    select\n        *,\n        case \n            when \"status\" = 'SUCCESS' then \"buyFilled\" - \"sellFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'DOWN' then \"revFilled\" - \"buyFilled\" - \"sellFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'UP' then \"buyFilled\" - \"sellFilled\" - \"revFilled\"\n            else 0\n        end as \"btcReturn\",\n        case \n            when \"status\" = 'SUCCESS' then \"sellPrice\" * \"sellFilled\" - \"buyPrice\" * \"buyFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'DOWN' then (\"sellPrice\" * \"sellFilled\" - \"buyPrice\" * \"buyFilled\") - \"revPrice\" * \"revFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'UP' then (\"revPrice\" * \"revFilled\") - ABS(\"sellPrice\" * \"sellFilled\" - \"buyPrice\" * \"buyFilled\")\n            else 0\n        end as \"usdReturn\"\n    from (\n        select\n            *,\n            case when \"direction\" = 'UP' then \"firstStatus\" else \"secondStatus\" end as \"buyStatus\",\n            case when \"direction\" = 'UP' then \"firstPrice\" else \"secondPrice\" end as \"buyPrice\",\n            case when \"direction\" = 'UP' then \"firstQty\" else \"secondQty\" end as \"buyQty\",\n            case when \"direction\" = 'UP' then \"firstFilled\" else \"secondFilled\" end as \"buyFilled\",\n            case when \"direction\" = 'UP' then \"firstFees\" else \"secondFees\" end as \"buyFees\",\n            \n            case when \"direction\" = 'DOWN' then \"firstStatus\" else \"secondStatus\" end as \"sellStatus\",\n            case when \"direction\" = 'DOWN' then \"firstPrice\" else \"secondPrice\" end as \"sellPrice\",\n            case when \"direction\" = 'DOWN' then \"firstQty\" else \"secondQty\" end as \"sellQty\",\n            case when \"direction\" = 'DOWN' then \"firstFilled\" else \"secondFilled\" end as \"sellFilled\",\n            case when \"direction\" = 'DOWN' then \"firstFees\" else \"secondFees\" end as \"sellFees\",\n            \"firstFees\" + \"secondFees\" + \"revFees\" as \"fees\"\n        from (\n            select \n                uuid,\n                data->>'createdAt' as \"createdAt\", \n                case when data->>'endedAt' = '0001-01-01T00:00:00Z' then '' else data->>'endedAt' end as \"endedAt\",\n                data->>'direction' as \"direction\",\n                data->>'status' as \"status\",\n                data->'firstOrder'->>'status' as \"firstStatus\",\n                data->'secondOrder'->>'status' as \"secondStatus\",\n                data->'reversalOrder'->>'status' as \"revStatus\",\n                (data->'firstRequest'->>'price')::decimal as \"firstPrice\",\n                (data->'secondRequest'->>'price')::decimal as \"secondPrice\",\n                (data->'reversalOrder'->'request'->>'price')::decimal as \"revPrice\",\n                (data->'firstRequest'->>'quantity')::decimal as \"firstQty\",\n                (data->'secondRequest'->>'quantity')::decimal as \"secondQty\",\n                (data->'reversalRequest'->>'funds')::decimal as \"revFunds\",\n                (data->'firstOrder'->>'filled')::decimal as \"firstFilled\",\n                (data->'secondOrder'->>'filled')::decimal as \"secondFilled\",\n                (data->'reversalOrder'->>'filled')::decimal as \"revFilled\",\n                (data->'reversalOrder'->>'fees')::decimal as \"revFees\",\n                (data->'secondOrder'->>'fees')::decimal as \"secondFees\",\n                (data->'firstOrder'->>'fees')::decimal as \"firstFees\"\n            from \n                orderpairs \n        ) as pairs\n    ) as \"pairsWithReturns\"\n) as pairReturns\n\nWHERE $__timeFilter(GREATEST(\"createdAt\", \"endedAt\"))\n) as btc\n\n-- Add zero at the end to give something to select when nothing exists\nUNION ALL\n\nselect\n  0 as amount\n\n",
                    "refId": "A",
                    "select": [
                      [
                        {
                          "params": [
                            "value"
                          ],
                          "type": "column"
                        }
                      ]
                    ],
                    "timeColumn": "time",
                    "where": [
                      {
                        "name": "$__timeFilter",
                        "params": [],
                        "type": "macro"
                      }
                    ]
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Fees",
                "type": "stat"
              },
              {
                "datasource": null,
                "fieldConfig": {
                  "defaults": {
                    "custom": {
                      "align": null
                    },
                    "mappings": [],
                    "thresholds": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "green",
                          "value": null
                        },
                        {
                          "color": "semi-dark-red",
                          "value": 0
                        },
                        {
                          "color": "semi-dark-green",
                          "value": 1
                        },
                        {
                          "color": "#EAB839",
                          "value": 3
                        },
                        {
                          "color": "semi-dark-red",
                          "value": 5
                        }
                      ]
                    }
                  },
                  "overrides": [
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "uuid"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 340
                        }
                      ]
                    }
                  ]
                },
                "gridPos": {
                  "h": 6,
                  "w": 4,
                  "x": 0,
                  "y": 6
                },
                "id": 3,
                "options": {
                  "colorMode": "value",
                  "graphMode": "none",
                  "justifyMode": "auto",
                  "orientation": "auto",
                  "reduceOptions": {
                    "calcs": [
                      "mean"
                    ],
                    "fields": "",
                    "values": false
                  },
                  "textMode": "auto"
                },
                "pluginVersion": "7.3.5",
                "targets": [
                  {
                    "format": "table",
                    "group": [],
                    "metricColumn": "none",
                    "rawQuery": true,
                    "rawSql": "SELECT\n  count(1) as \"Open Orders\"\nfrom\n  orderpairs\nWHERE\n    (data->>'status') = 'OPEN'",
                    "refId": "A",
                    "select": [
                      [
                        {
                          "params": [
                            "value"
                          ],
                          "type": "column"
                        }
                      ]
                    ],
                    "timeColumn": "time",
                    "where": [
                      {
                        "name": "$__timeFilter",
                        "params": [],
                        "type": "macro"
                      }
                    ]
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Open Pairs",
                "type": "stat"
              },
              {
                "datasource": null,
                "fieldConfig": {
                  "defaults": {
                    "custom": {
                      "align": null,
                      "displayMode": "auto",
                      "filterable": false
                    },
                    "decimals": 2,
                    "mappings": [],
                    "thresholds": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "green",
                          "value": null
                        },
                        {
                          "color": "red",
                          "value": 80
                        }
                      ]
                    }
                  },
                  "overrides": [
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "createdAt"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 239
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "endedAt"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 241
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "buyPrice"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 86
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "buyQty"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 99
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "buyFilled"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 104
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "sellPrice"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 75
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "sellQty"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 98
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "sellFilled"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 98
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "revPrice"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 76
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "revQty"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 95
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "revFilled"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 93
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "revStatus"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 77
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "fees"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 97
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "btcReturn"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 99
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "btcUsdReturn"
                      },
                      "properties": [
                        {
                          "id": "noValue",
                          "value": "-"
                        },
                        {
                          "id": "custom.width",
                          "value": 110
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "usdReturn"
                      },
                      "properties": [
                        {
                          "id": "noValue",
                          "value": "-"
                        },
                        {
                          "id": "custom.width",
                          "value": 80
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "direction"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 74
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "totalReturn"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 92
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "uuid"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 288
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "status"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 100
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "buyStatus"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 93
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "sellStatus"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 96
                        }
                      ]
                    }
                  ]
                },
                "gridPos": {
                  "h": 6,
                  "w": 20,
                  "x": 4,
                  "y": 6
                },
                "id": 8,
                "options": {
                  "showHeader": true,
                  "sortBy": [
                    {
                      "desc": true,
                      "displayName": "createdAt"
                    }
                  ]
                },
                "pluginVersion": "7.3.5",
                "targets": [
                  {
                    "format": "table",
                    "group": [],
                    "metricColumn": "none",
                    "rawQuery": true,
                    "rawSql": "  select\n  \"uuid\",\n  \"createdAt\",\n  \"direction\",\n  \"buyStatus\",\n  \"sellStatus\",\n  case when \"buyPrice\" <> '0' then \"buyPrice\" end as \"buyPrice\",\n  case when \"sellPrice\" <> '0' then \"sellPrice\" end as \"sellPrice\",\n  case when \"buyQty\" <> '0' then \"buyQty\" end as \"buyQty\",\n  case when \"sellQty\" <> '0' then \"sellQty\" end as \"sellQty\",\n  case when \"buyFilled\" <> '0' then \"buyFilled\" end as \"buyFilled\",\n  case when \"sellFilled\" <> '0' then \"sellFilled\" end as \"sellFilled\",\n  case when \"fees\" <> '0' then \"fees\" end as \"fees\"\nfrom (\nselect \n  *,\n  CASE \n    WHEN \"status\" = 'SUCCESS' then \"buyFilled\" - \"sellFilled\"\n    WHEN \"status\" = 'REVERSED' then \"firstFilled\" - \"secondFilled\" - \"revFilled\"\n    else 0 \n  end as \"btcGains\",\n  CASE \n    WHEN \"status\" = 'SUCCESS' then \"sellPrice\" * \"sellFilled\" - \"buyPrice\" * \"buyFilled\"\n    WHEN \"status\" = 'REVERSED' then \"firstPrice\" * \"firstFilled\" - \"revPrice\" * \"revFilled\"\n    else 0 \n  end as \"usdGains\",\n  CASE \n    WHEN \"status\" = 'REVERSED' and \"direction\" = 'UP' then \"firstFilled\" - \"revFilled\" \n    WHEN \"status\" = 'REVERSED' and \"direction\" = 'DOWN' then \"revFilled\" - \"firstFilled\"\n    else 0 \n  end as \"btcLosses\",\n  CASE \n    WHEN \"status\" = 'REVERSED' and \"direction\" = 'UP' then \"firstPrice\" * \"firstFilled\" - \"revPrice\" * \"revFilled\"\n    WHEN \"status\" = 'REVERSED' and \"direction\" = 'DOWN' then\"revPrice\" * \"revFilled\" - \"firstPrice\" * \"firstFilled\"\n    else 0 \n  end as \"usdLosses\"\nfrom\n  (\n  SELECT \n  uuid,\n  data->>'createdAt' as \"createdAt\", \n  CASE WHEN data->>'endedAt' <> '0001-01-01T00:00:00Z' THEN data->>'endedAt' END as \"endedAt\",\n  'UP' as \"direction\",\n  data->>'status' as \"status\",\n  (data->'firstRequest'->>'price')::decimal as \"firstPrice\",\n  (data->'firstOrder'->>'filled')::decimal as \"firstFilled\",\n  (data->'secondRequest'->>'price')::decimal as \"secondPrice\",\n  (data->'secondOrder'->>'filled')::decimal as \"secondFilled\",\n  (data->'firstRequest'->>'price')::decimal as \"buyPrice\", \n  (data->'firstRequest'->>'quantity')::decimal as \"buyQty\",\n  case when data->'firstOrder'->>'filled' <> '0' then (data->'firstOrder'->>'filled')::decimal else 0 end as \"buyFilled\", \n  case when data->'firstOrder'->>'status' <> '' then data->'firstOrder'->>'status'end as \"buyStatus\",\n  (data->'secondRequest'->>'price')::decimal as \"sellPrice\", \n  (data->'secondRequest'->>'quantity')::decimal as \"sellQty\", \n  case when data->'secondOrder'->>'filled' <> '0' then (data->'secondOrder'->>'filled')::decimal else 0 end as \"sellFilled\", \n  data->'secondOrder'->>'status' as \"sellStatus\",\n  case when data->'reversalOrder'->'request'->>'price' <> '0' then (data->'reversalOrder'->'request'->>'price')::decimal else 0 end as \"revPrice\", \n  case when data->'reversalOrder'->'request'->>'quantity' <> '0' then (data->'reversalOrder'->'request'->>'quantity')::decimal end as \"revQty\", \n  case when data->'reversalOrder'->>'filled' <> '0' then (data->'reversalOrder'->>'filled')::decimal else 0 end as \"revFilled\", \n  data->'reversalOrder'->>'status' as \"revStatus\",\n  (data->'firstOrder'->>'fees')::decimal + (data->'secondOrder'->>'fees')::decimal + (data->'reversalOrder'->>'fees')::decimal as \"fees\"\nFROM \n  orderpairs \nWHERE\n  data->'firstRequest'->>'side' = 'BUY'\n  \nUNION ALL\n\nSELECT \n  uuid,\n  data->>'createdAt' as \"createdAt\", \n  CASE WHEN data->>'endedAt' = '0001-01-01T00:00:00Z' THEN '' ELSE data->>'endedAt' END as \"endedAt\",\n  'DOWN' as \"direction\",\n  data->>'status' as \"status\",\n  (data->'firstRequest'->>'price')::decimal as \"firstPrice\",\n  (data->'firstOrder'->>'filled')::decimal as \"firstFilled\",\n  (data->'secondRequest'->>'price')::decimal as \"secondPrice\",\n  (data->'secondOrder'->>'filled')::decimal as \"secondFilled\",\n  (data->'secondRequest'->>'price')::decimal as \"buyPrice\", \n  (data->'secondRequest'->>'quantity')::decimal as \"buyQty\", \n  case when data->'secondOrder'->>'filled' <> '0' then (data->'secondOrder'->>'filled')::decimal else 0 end as \"buyFilled\", \n  data->'secondOrder'->>'status' as \"buyStatus\",\n  (data->'firstRequest'->>'price')::decimal as \"sellPrice\", \n  (data->'firstRequest'->>'quantity')::decimal as \"sellQty\", \n  case when data->'firstOrder'->>'filled' <> '0' then (data->'firstOrder'->>'filled')::decimal else 0 end as \"sellFilled\", \n  data->'firstOrder'->>'status' as \"sellStatus\",\n  case when data->'reversalOrder'->'request'->>'price' <> '0' then (data->'reversalOrder'->'request'->>'price')::decimal else 0 end as \"revPrice\", \n  case when data->'reversalOrder'->'request'->>'quantity' <> '0' then (data->'reversalOrder'->'request'->>'quantity')::decimal end as \"revQty\", \n  case when data->'reversalOrder'->>'filled' <> '0' then (data->'reversalOrder'->>'filled')::decimal else 0 end as \"revFilled\", \n  data->'reversalOrder'->>'status' as \"revStatus\",\n  (data->'firstOrder'->>'fees')::decimal + (data->'secondOrder'->>'fees')::decimal + (data->'reversalOrder'->>'fees')::decimal as \"fees\"\nFROM \n  orderpairs \nWHERE\n  data->'firstRequest'->>'side' = 'SELL'\n) as pairs\n\nORDER BY\n  pairs.\"createdAt\"\n) as pairReturns\n\nWHERE \"status\" = 'OPEN'\n\n",
                    "refId": "A",
                    "select": [
                      [
                        {
                          "params": [
                            "value"
                          ],
                          "type": "column"
                        }
                      ]
                    ],
                    "timeColumn": "time",
                    "where": [
                      {
                        "name": "$__timeFilter",
                        "params": [],
                        "type": "macro"
                      }
                    ]
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Open Pairs",
                "type": "table"
              },
              {
                "datasource": null,
                "fieldConfig": {
                  "defaults": {
                    "custom": {
                      "align": null
                    },
                    "mappings": [],
                    "thresholds": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "super-light-blue",
                          "value": null
                        }
                      ]
                    }
                  },
                  "overrides": [
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "uuid"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 340
                        }
                      ]
                    }
                  ]
                },
                "gridPos": {
                  "h": 6,
                  "w": 4,
                  "x": 0,
                  "y": 12
                },
                "id": 5,
                "options": {
                  "colorMode": "value",
                  "graphMode": "none",
                  "justifyMode": "auto",
                  "orientation": "auto",
                  "reduceOptions": {
                    "calcs": [
                      "mean"
                    ],
                    "fields": "",
                    "values": false
                  },
                  "textMode": "auto"
                },
                "pluginVersion": "7.3.5",
                "targets": [
                  {
                    "format": "table",
                    "group": [],
                    "metricColumn": "none",
                    "rawQuery": true,
                    "rawSql": "select\n  count(1) as \"Open Orders\"\nfrom \n  orderpairs\nwhere \n  data->>'status' = 'SUCCESS' \nand\n  $__timeFilter(data->>'createdAt');",
                    "refId": "A",
                    "select": [
                      [
                        {
                          "params": [
                            "value"
                          ],
                          "type": "column"
                        }
                      ]
                    ],
                    "timeColumn": "time",
                    "where": [
                      {
                        "name": "$__timeFilter",
                        "params": [],
                        "type": "macro"
                      }
                    ]
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Successful Pairs",
                "type": "stat"
              },
              {
                "datasource": null,
                "fieldConfig": {
                  "defaults": {
                    "custom": {
                      "align": null,
                      "displayMode": "auto",
                      "filterable": false
                    },
                    "decimals": 2,
                    "mappings": [],
                    "thresholds": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "green",
                          "value": null
                        },
                        {
                          "color": "red",
                          "value": 80
                        }
                      ]
                    }
                  },
                  "overrides": [
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "createdAt"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 239
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "endedAt"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 241
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "buyPrice"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 86
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "buyQty"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 99
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "buyFilled"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 104
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "sellPrice"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 75
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "sellQty"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 98
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "sellFilled"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 98
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "revPrice"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 76
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "revQty"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 95
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "revFilled"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 93
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "revStatus"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 77
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "fees"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 59
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "btcReturn"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 99
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "btcUsdReturn"
                      },
                      "properties": [
                        {
                          "id": "noValue",
                          "value": "-"
                        },
                        {
                          "id": "custom.width",
                          "value": 110
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "usdReturn"
                      },
                      "properties": [
                        {
                          "id": "noValue",
                          "value": "-"
                        },
                        {
                          "id": "custom.width",
                          "value": 80
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "direction"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 79
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "totalReturn"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 92
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "uuid"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 288
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "status"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 100
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "revFunds"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 101
                        }
                      ]
                    }
                  ]
                },
                "gridPos": {
                  "h": 6,
                  "w": 20,
                  "x": 4,
                  "y": 12
                },
                "id": 42,
                "options": {
                  "showHeader": true,
                  "sortBy": [
                    {
                      "desc": true,
                      "displayName": "endedAt"
                    }
                  ]
                },
                "pluginVersion": "7.3.5",
                "targets": [
                  {
                    "format": "table",
                    "group": [],
                    "metricColumn": "none",
                    "rawQuery": true,
                    "rawSql": "select\n    \"uuid\",\n    \"createdAt\",\n    \"endedAt\",\n    \"direction\",\n    case when \"buyPrice\" <> '0' then \"buyPrice\" end as \"buyPrice\",\n    case when \"sellPrice\" <> '0' then \"sellPrice\" end as \"sellPrice\",\n    case when \"buyQty\" <> '0' then \"buyQty\" end as \"buyQty\",\n    case when \"sellQty\" <> '0' then \"sellQty\" end as \"sellQty\",\n    case when \"buyFilled\" <> '0' then \"buyFilled\" end as \"buyFilled\",\n    case when \"sellFilled\" <> '0' then \"sellFilled\" end as \"sellFilled\",\n    case when \"btcReturn\"<> '0' then \"btcReturn\" end as \"btcReturn\",\n    case when (\"btcReturn\" * \"firstPrice\") <> '0' then (\"btcReturn\" * \"firstPrice\") end as \"btcUsdReturn\",\n    case when \"usdReturn\" <> '0' then \"usdReturn\" end as \"usdReturn\",\n    case when \"fees\" <> '0' then \"fees\" end as \"fees\",\n    case when (\"usdReturn\") + (\"btcReturn\" * \"firstPrice\") - fees <> 0 then (\"usdReturn\") + (\"btcReturn\" * \"firstPrice\") - fees end as \"totalReturn\"\nfrom (\n    select\n        *,\n        case \n            when \"status\" = 'SUCCESS' then \"buyFilled\" - \"sellFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'DOWN' then \"revFilled\" - \"buyFilled\" - \"sellFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'UP' then \"buyFilled\" - \"sellFilled\" - \"revFilled\"\n            else 0\n        end as \"btcReturn\",\n        case \n            when \"status\" = 'SUCCESS' then \"sellPrice\" * \"sellFilled\" - \"buyPrice\" * \"buyFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'DOWN' then (\"sellPrice\" * \"sellFilled\" - \"buyPrice\" * \"buyFilled\") - \"revPrice\" * \"revFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'UP' then (\"revPrice\" * \"revFilled\") - ABS(\"sellPrice\" * \"sellFilled\" - \"buyPrice\" * \"buyFilled\")\n            else 0\n        end as \"usdReturn\"\n    from (\n        select\n            *,\n            case when \"direction\" = 'UP' then \"firstStatus\" else \"secondStatus\" end as \"buyStatus\",\n            case when \"direction\" = 'UP' then \"firstPrice\" else \"secondPrice\" end as \"buyPrice\",\n            case when \"direction\" = 'UP' then \"firstQty\" else \"secondQty\" end as \"buyQty\",\n            case when \"direction\" = 'UP' then \"firstFilled\" else \"secondFilled\" end as \"buyFilled\",\n            case when \"direction\" = 'UP' then \"firstFees\" else \"secondFees\" end as \"buyFees\",\n            \n            case when \"direction\" = 'DOWN' then \"firstStatus\" else \"secondStatus\" end as \"sellStatus\",\n            case when \"direction\" = 'DOWN' then \"firstPrice\" else \"secondPrice\" end as \"sellPrice\",\n            case when \"direction\" = 'DOWN' then \"firstQty\" else \"secondQty\" end as \"sellQty\",\n            case when \"direction\" = 'DOWN' then \"firstFilled\" else \"secondFilled\" end as \"sellFilled\",\n            case when \"direction\" = 'DOWN' then \"firstFees\" else \"secondFees\" end as \"sellFees\",\n            \"firstFees\" + \"secondFees\" + \"revFees\" as \"fees\"\n        from (\n            select \n                uuid,\n                data->>'createdAt' as \"createdAt\", \n                case when data->>'endedAt' = '0001-01-01T00:00:00Z' then '' else data->>'endedAt' end as \"endedAt\",\n                data->>'direction' as \"direction\",\n                data->>'status' as \"status\",\n                data->'firstOrder'->>'status' as \"firstStatus\",\n                data->'secondOrder'->>'status' as \"secondStatus\",\n                data->'reversalOrder'->>'status' as \"revStatus\",\n                (data->'firstRequest'->>'price')::decimal as \"firstPrice\",\n                (data->'secondRequest'->>'price')::decimal as \"secondPrice\",\n                (data->'reversalOrder'->'request'->>'price')::decimal as \"revPrice\",\n                (data->'firstRequest'->>'quantity')::decimal as \"firstQty\",\n                (data->'secondRequest'->>'quantity')::decimal as \"secondQty\",\n                (data->'reversalRequest'->>'funds')::decimal as \"revFunds\",\n                (data->'firstOrder'->>'filled')::decimal as \"firstFilled\",\n                (data->'secondOrder'->>'filled')::decimal as \"secondFilled\",\n                (data->'reversalOrder'->>'filled')::decimal as \"revFilled\",\n                (data->'reversalOrder'->>'fees')::decimal as \"revFees\",\n                (data->'secondOrder'->>'fees')::decimal as \"secondFees\",\n                (data->'firstOrder'->>'fees')::decimal as \"firstFees\"\n            from \n                orderpairs \n        ) as pairs\n    ) as \"pairsWithReturns\"\n) as pairReturns\n\nWHERE \"status\" = 'SUCCESS'\nAND $__timeFilter(GREATEST(\"createdAt\", \"endedAt\"))",
                    "refId": "A",
                    "select": [
                      [
                        {
                          "params": [
                            "value"
                          ],
                          "type": "column"
                        }
                      ]
                    ],
                    "timeColumn": "time",
                    "where": [
                      {
                        "name": "$__timeFilter",
                        "params": [],
                        "type": "macro"
                      }
                    ]
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Successful Pairs",
                "type": "table"
              },
              {
                "datasource": null,
                "fieldConfig": {
                  "defaults": {
                    "custom": {
                      "align": null
                    },
                    "mappings": [],
                    "thresholds": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "super-light-blue",
                          "value": null
                        },
                        {
                          "color": "semi-dark-red",
                          "value": 1
                        }
                      ]
                    }
                  },
                  "overrides": [
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "uuid"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 340
                        }
                      ]
                    }
                  ]
                },
                "gridPos": {
                  "h": 6,
                  "w": 4,
                  "x": 0,
                  "y": 18
                },
                "id": 28,
                "options": {
                  "colorMode": "value",
                  "graphMode": "none",
                  "justifyMode": "auto",
                  "orientation": "auto",
                  "reduceOptions": {
                    "calcs": [
                      "mean"
                    ],
                    "fields": "",
                    "values": false
                  },
                  "textMode": "auto"
                },
                "pluginVersion": "7.3.5",
                "targets": [
                  {
                    "format": "table",
                    "group": [],
                    "metricColumn": "none",
                    "rawQuery": true,
                    "rawSql": "select\n  count(1) as \"Open Orders\"\nfrom \n  orderpairs\nwhere \n  data->>'status' = 'REVERSED' \nand\n  $__timeFilter(data->>'createdAt');",
                    "refId": "A",
                    "select": [
                      [
                        {
                          "params": [
                            "value"
                          ],
                          "type": "column"
                        }
                      ]
                    ],
                    "timeColumn": "time",
                    "where": [
                      {
                        "name": "$__timeFilter",
                        "params": [],
                        "type": "macro"
                      }
                    ]
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Reversed Pairs",
                "type": "stat"
              },
              {
                "datasource": null,
                "fieldConfig": {
                  "defaults": {
                    "custom": {
                      "align": null,
                      "displayMode": "auto",
                      "filterable": false
                    },
                    "decimals": 2,
                    "mappings": [],
                    "thresholds": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "green",
                          "value": null
                        },
                        {
                          "color": "red",
                          "value": 80
                        }
                      ]
                    }
                  },
                  "overrides": [
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "createdAt"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 239
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "endedAt"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 242
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "buyPrice"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 86
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "buyQty"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 99
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "buyFilled"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 104
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "sellPrice"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 75
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "sellQty"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 98
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "sellFilled"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 98
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "revPrice"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 76
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "revQty"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 95
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "revFilled"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 93
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "revStatus"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 77
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "fees"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 59
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "btcReturn"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 99
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        },
                        {
                          "id": "custom.align",
                          "value": "right"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "btcUsdReturn"
                      },
                      "properties": [
                        {
                          "id": "noValue",
                          "value": "-"
                        },
                        {
                          "id": "custom.width",
                          "value": 110
                        },
                        {
                          "id": "custom.align",
                          "value": "right"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "usdReturn"
                      },
                      "properties": [
                        {
                          "id": "noValue",
                          "value": "-"
                        },
                        {
                          "id": "custom.width",
                          "value": 80
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "direction"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 84
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "totalReturn"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 101
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "uuid"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 288
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "status"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 100
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "revFunds"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 91
                        }
                      ]
                    }
                  ]
                },
                "gridPos": {
                  "h": 6,
                  "w": 20,
                  "x": 4,
                  "y": 18
                },
                "id": 43,
                "options": {
                  "showHeader": true,
                  "sortBy": [
                    {
                      "desc": true,
                      "displayName": "endedAt"
                    }
                  ]
                },
                "pluginVersion": "7.3.5",
                "targets": [
                  {
                    "format": "table",
                    "group": [],
                    "metricColumn": "none",
                    "rawQuery": true,
                    "rawSql": "select\n    \"uuid\",\n    \"createdAt\",\n    \"endedAt\",\n    \"direction\",\n    case when \"buyPrice\" <> '0' then \"buyPrice\" end as \"buyPrice\",\n    case when \"sellPrice\" <> '0' then \"sellPrice\" end as \"sellPrice\",\n    case when \"revPrice\" <> '0' then \"revPrice\" end as \"revPrice\",\n    case when \"buyQty\" <> '0' then \"buyQty\" end as \"buyQty\",\n    case when \"sellQty\" <> '0' then \"sellQty\" end as \"sellQty\",\n    case when \"revFunds\" <> '0' then \"revFunds\" end as \"revFunds\",\n    case when \"buyFilled\" <> '0' then \"buyFilled\" end as \"buyFilled\",\n    case when \"sellFilled\" <> '0' then \"sellFilled\" end as \"sellFilled\",\n    case when \"revFilled\" <> '0' then \"revFilled\" end as \"revFilled\",\n    case when \"btcReturn\"<> '0' then \"btcReturn\" end as \"btcReturn\",\n    case when (\"btcReturn\" * \"firstPrice\") <> '0' then (\"btcReturn\" * \"firstPrice\") end as \"btcUsdReturn\",\n    case when \"usdReturn\" <> '0' then \"usdReturn\" end as \"usdReturn\",\n    case when \"fees\" <> '0' then \"fees\" end as \"fees\",\n    case when (\"usdReturn\") + (\"btcReturn\" * \"firstPrice\") - fees <> 0 then (\"usdReturn\") + (\"btcReturn\" * \"firstPrice\") - fees end as \"totalReturn\"\nfrom (\n    select\n        *,\n        case \n            when \"status\" = 'SUCCESS' then \"buyFilled\" - \"sellFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'DOWN' then \"revFilled\" - \"buyFilled\" - \"sellFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'UP' then \"buyFilled\" - \"sellFilled\" - \"revFilled\"\n        end as \"btcReturn\",\n        case \n            when \"status\" = 'SUCCESS' then \"sellPrice\" * \"sellFilled\" - \"buyPrice\" * \"buyFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'DOWN' then (\"sellPrice\" * \"sellFilled\" - \"buyPrice\" * \"buyFilled\") - \"revPrice\" * \"revFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'UP' then (\"revPrice\" * \"revFilled\") - ABS(\"sellPrice\" * \"sellFilled\" - \"buyPrice\" * \"buyFilled\")\n        end as \"usdReturn\"\n    from (\n        select\n            *,\n            case when \"direction\" = 'UP' then \"firstStatus\" else \"secondStatus\" end as \"buyStatus\",\n            case when \"direction\" = 'UP' then \"firstPrice\" else \"secondPrice\" end as \"buyPrice\",\n            case when \"direction\" = 'UP' then \"firstQty\" else \"secondQty\" end as \"buyQty\",\n            case when \"direction\" = 'UP' then \"firstFilled\" else \"secondFilled\" end as \"buyFilled\",\n            case when \"direction\" = 'UP' then \"firstFees\" else \"secondFees\" end as \"buyFees\",\n            \n            case when \"direction\" = 'DOWN' then \"firstStatus\" else \"secondStatus\" end as \"sellStatus\",\n            case when \"direction\" = 'DOWN' then \"firstPrice\" else \"secondPrice\" end as \"sellPrice\",\n            case when \"direction\" = 'DOWN' then \"firstQty\" else \"secondQty\" end as \"sellQty\",\n            case when \"direction\" = 'DOWN' then \"firstFilled\" else \"secondFilled\" end as \"sellFilled\",\n            case when \"direction\" = 'DOWN' then \"firstFees\" else \"secondFees\" end as \"sellFees\",\n            \"firstFees\" + \"secondFees\" + \"revFees\" as \"fees\"\n        from (\n            select \n                uuid,\n                data->>'createdAt' as \"createdAt\", \n                case when data->>'endedAt' = '0001-01-01T00:00:00Z' then '' else data->>'endedAt' end as \"endedAt\",\n                data->>'direction' as \"direction\",\n                data->>'status' as \"status\",\n                data->'firstOrder'->>'status' as \"firstStatus\",\n                data->'secondOrder'->>'status' as \"secondStatus\",\n                data->'reversalOrder'->>'status' as \"revStatus\",\n                (data->'firstRequest'->>'price')::decimal as \"firstPrice\",\n                (data->'secondRequest'->>'price')::decimal as \"secondPrice\",\n                (data->'reversalOrder'->'request'->>'price')::decimal as \"revPrice\",\n                (data->'firstRequest'->>'quantity')::decimal as \"firstQty\",\n                (data->'secondRequest'->>'quantity')::decimal as \"secondQty\",\n                (data->'reversalRequest'->>'funds')::decimal as \"revFunds\",\n                (data->'firstOrder'->>'filled')::decimal as \"firstFilled\",\n                (data->'secondOrder'->>'filled')::decimal as \"secondFilled\",\n                (data->'reversalOrder'->>'filled')::decimal as \"revFilled\",\n                (data->'reversalOrder'->>'fees')::decimal as \"revFees\",\n                (data->'secondOrder'->>'fees')::decimal as \"secondFees\",\n                (data->'firstOrder'->>'fees')::decimal as \"firstFees\"\n            from \n                orderpairs \n        ) as pairs\n    ) as \"pairsWithReturns\"\n) as pairReturns\n\nWHERE \"status\" = 'REVERSED'\nAND $__timeFilter(GREATEST(\"createdAt\", \"endedAt\"))",
                    "refId": "A",
                    "select": [
                      [
                        {
                          "params": [
                            "value"
                          ],
                          "type": "column"
                        }
                      ]
                    ],
                    "timeColumn": "time",
                    "where": [
                      {
                        "name": "$__timeFilter",
                        "params": [],
                        "type": "macro"
                      }
                    ]
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Reversed Pairs",
                "type": "table"
              },
              {
                "datasource": null,
                "fieldConfig": {
                  "defaults": {
                    "custom": {
                      "align": null
                    },
                    "mappings": [],
                    "thresholds": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "super-light-blue",
                          "value": null
                        }
                      ]
                    }
                  },
                  "overrides": [
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "uuid"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 340
                        }
                      ]
                    }
                  ]
                },
                "gridPos": {
                  "h": 6,
                  "w": 4,
                  "x": 0,
                  "y": 24
                },
                "id": 17,
                "options": {
                  "colorMode": "value",
                  "graphMode": "none",
                  "justifyMode": "auto",
                  "orientation": "auto",
                  "reduceOptions": {
                    "calcs": [
                      "mean"
                    ],
                    "fields": "",
                    "values": false
                  },
                  "textMode": "auto"
                },
                "pluginVersion": "7.3.5",
                "targets": [
                  {
                    "format": "table",
                    "group": [],
                    "metricColumn": "none",
                    "rawQuery": true,
                    "rawSql": "SELECT\n  count(1) as orders\nfrom  orderpairs\nWHERE\n  $__timeFilter(data->>'createdAt')\nand\n  data->>'status' = 'CANCELED'",
                    "refId": "A",
                    "select": [
                      [
                        {
                          "params": [
                            "value"
                          ],
                          "type": "column"
                        }
                      ]
                    ],
                    "timeColumn": "time",
                    "where": [
                      {
                        "name": "$__timeFilter",
                        "params": [],
                        "type": "macro"
                      }
                    ]
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Canceled Pairs",
                "type": "stat"
              },
              {
                "datasource": null,
                "fieldConfig": {
                  "defaults": {
                    "custom": {
                      "align": null,
                      "displayMode": "auto",
                      "filterable": false
                    },
                    "decimals": 2,
                    "mappings": [],
                    "thresholds": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "green",
                          "value": null
                        },
                        {
                          "color": "red",
                          "value": 80
                        }
                      ]
                    }
                  },
                  "overrides": [
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "createdAt"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 239
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "endedAt"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 241
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "buyPrice"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 86
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "buyQty"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 99
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "buyFilled"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 104
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "sellPrice"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 75
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "sellQty"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 98
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "sellFilled"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 98
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "revPrice"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 76
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "revQty"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 95
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "revFilled"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 93
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "revStatus"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 77
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "fees"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 59
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "btcReturn"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 99
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        },
                        {
                          "id": "custom.align",
                          "value": "right"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "btcUsdReturn"
                      },
                      "properties": [
                        {
                          "id": "noValue",
                          "value": "-"
                        },
                        {
                          "id": "custom.width",
                          "value": 110
                        },
                        {
                          "id": "custom.align",
                          "value": "right"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "usdReturn"
                      },
                      "properties": [
                        {
                          "id": "noValue",
                          "value": "-"
                        },
                        {
                          "id": "custom.width",
                          "value": 80
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "direction"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 86
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "totalReturn"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 92
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "uuid"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 292
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "status"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 100
                        }
                      ]
                    }
                  ]
                },
                "gridPos": {
                  "h": 6,
                  "w": 20,
                  "x": 4,
                  "y": 24
                },
                "id": 45,
                "options": {
                  "showHeader": true,
                  "sortBy": [
                    {
                      "desc": true,
                      "displayName": "endedAt"
                    }
                  ]
                },
                "pluginVersion": "7.3.5",
                "targets": [
                  {
                    "format": "table",
                    "group": [],
                    "metricColumn": "none",
                    "rawQuery": true,
                    "rawSql": "select\n    \"uuid\",\n    \"createdAt\",\n    \"endedAt\",\n    \"direction\",\n    case when \"buyPrice\" <> '0' then \"buyPrice\" end as \"buyPrice\",\n    case when \"sellPrice\" <> '0' then \"sellPrice\" end as \"sellPrice\",\n    case when \"revPrice\" <> '0' then \"revPrice\" end as \"revPrice\",\n    case when \"buyQty\" <> '0' then \"buyQty\" end as \"buyQty\",\n    case when \"sellQty\" <> '0' then \"sellQty\" end as \"sellQty\",\n    case when \"revFunds\" <> '0' then \"revFunds\" end as \"revFunds\",\n    case when \"buyFilled\" <> '0' then \"buyFilled\" end as \"buyFilled\",\n    case when \"sellFilled\" <> '0' then \"sellFilled\" end as \"sellFilled\",\n    case when \"revFilled\" <> '0' then \"revFilled\" end as \"revFilled\",\n    case when \"btcReturn\"<> '0' then \"btcReturn\" end as \"btcReturn\",\n    case when (\"btcReturn\" * \"firstPrice\") <> '0' then (\"btcReturn\" * \"firstPrice\") end as \"btcUsdReturn\",\n    case when \"usdReturn\" <> '0' then \"usdReturn\" end as \"usdReturn\",\n    case when \"fees\" <> '0' then \"fees\" end as \"fees\",\n    case when (\"usdReturn\") + (\"btcReturn\" * \"firstPrice\") - fees <> 0 then (\"usdReturn\") + (\"btcReturn\" * \"firstPrice\") - fees end as \"totalReturn\"\nfrom (\n    select\n        *,\n        case \n            when \"status\" = 'SUCCESS' then \"buyFilled\" - \"sellFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'DOWN' then \"revFilled\" - \"buyFilled\" - \"sellFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'UP' then \"buyFilled\" - \"sellFilled\" - \"revFilled\"\n            else 0\n        end as \"btcReturn\",\n        case \n            when \"status\" = 'SUCCESS' then \"sellPrice\" * \"sellFilled\" - \"buyPrice\" * \"buyFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'DOWN' then (\"sellPrice\" * \"sellFilled\" - \"buyPrice\" * \"buyFilled\") - \"revPrice\" * \"revFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'UP' then (\"revPrice\" * \"revFilled\") - ABS(\"sellPrice\" * \"sellFilled\" - \"buyPrice\" * \"buyFilled\")\n            else 0\n        end as \"usdReturn\"\n    from (\n        select\n            *,\n            case when \"direction\" = 'UP' then \"firstStatus\" else \"secondStatus\" end as \"buyStatus\",\n            case when \"direction\" = 'UP' then \"firstPrice\" else \"secondPrice\" end as \"buyPrice\",\n            case when \"direction\" = 'UP' then \"firstQty\" else \"secondQty\" end as \"buyQty\",\n            case when \"direction\" = 'UP' then \"firstFilled\" else \"secondFilled\" end as \"buyFilled\",\n            case when \"direction\" = 'UP' then \"firstFees\" else \"secondFees\" end as \"buyFees\",\n            \n            case when \"direction\" = 'DOWN' then \"firstStatus\" else \"secondStatus\" end as \"sellStatus\",\n            case when \"direction\" = 'DOWN' then \"firstPrice\" else \"secondPrice\" end as \"sellPrice\",\n            case when \"direction\" = 'DOWN' then \"firstQty\" else \"secondQty\" end as \"sellQty\",\n            case when \"direction\" = 'DOWN' then \"firstFilled\" else \"secondFilled\" end as \"sellFilled\",\n            case when \"direction\" = 'DOWN' then \"firstFees\" else \"secondFees\" end as \"sellFees\",\n            \"firstFees\" + \"secondFees\" + \"revFees\" as \"fees\"\n        from (\n            select \n                uuid,\n                data->>'createdAt' as \"createdAt\", \n                case when data->>'endedAt' = '0001-01-01T00:00:00Z' then '' else data->>'endedAt' end as \"endedAt\",\n                data->>'direction' as \"direction\",\n                data->>'status' as \"status\",\n                data->'firstOrder'->>'status' as \"firstStatus\",\n                data->'secondOrder'->>'status' as \"secondStatus\",\n                data->'reversalOrder'->>'status' as \"revStatus\",\n                (data->'firstRequest'->>'price')::decimal as \"firstPrice\",\n                (data->'secondRequest'->>'price')::decimal as \"secondPrice\",\n                (data->'reversalOrder'->'request'->>'price')::decimal as \"revPrice\",\n                (data->'firstRequest'->>'quantity')::decimal as \"firstQty\",\n                (data->'secondRequest'->>'quantity')::decimal as \"secondQty\",\n                (data->'reversalRequest'->>'funds')::decimal as \"revFunds\",\n                (data->'firstOrder'->>'filled')::decimal as \"firstFilled\",\n                (data->'secondOrder'->>'filled')::decimal as \"secondFilled\",\n                (data->'reversalOrder'->>'filled')::decimal as \"revFilled\",\n                (data->'reversalOrder'->>'fees')::decimal as \"revFees\",\n                (data->'secondOrder'->>'fees')::decimal as \"secondFees\",\n                (data->'firstOrder'->>'fees')::decimal as \"firstFees\"\n            from \n                orderpairs \n        ) as pairs\n    ) as \"pairsWithReturns\"\n) as pairReturns\n\nWHERE \"status\" = 'CANCELED'\nAND $__timeFilter(GREATEST(\"createdAt\", \"endedAt\"))",
                    "refId": "A",
                    "select": [
                      [
                        {
                          "params": [
                            "value"
                          ],
                          "type": "column"
                        }
                      ]
                    ],
                    "timeColumn": "time",
                    "where": [
                      {
                        "name": "$__timeFilter",
                        "params": [],
                        "type": "macro"
                      }
                    ]
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Canceled Pairs",
                "type": "table"
              },
              {
                "datasource": null,
                "fieldConfig": {
                  "defaults": {
                    "custom": {
                      "align": null
                    },
                    "mappings": [],
                    "thresholds": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "super-light-blue",
                          "value": null
                        },
                        {
                          "color": "semi-dark-red",
                          "value": 1
                        }
                      ]
                    }
                  },
                  "overrides": [
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "uuid"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 340
                        }
                      ]
                    }
                  ]
                },
                "gridPos": {
                  "h": 6,
                  "w": 4,
                  "x": 0,
                  "y": 30
                },
                "id": 15,
                "options": {
                  "colorMode": "value",
                  "graphMode": "none",
                  "justifyMode": "auto",
                  "orientation": "auto",
                  "reduceOptions": {
                    "calcs": [
                      "mean"
                    ],
                    "fields": "",
                    "values": false
                  },
                  "textMode": "auto"
                },
                "pluginVersion": "7.3.5",
                "targets": [
                  {
                    "format": "table",
                    "group": [],
                    "metricColumn": "none",
                    "rawQuery": true,
                    "rawSql": "SELECT\n  count(1) as orders\nfrom  orderpairs\nWHERE\n  $__timeFilter(data->>'createdAt')\nand\n  data->>'status' = 'BROKEN'",
                    "refId": "A",
                    "select": [
                      [
                        {
                          "params": [
                            "value"
                          ],
                          "type": "column"
                        }
                      ]
                    ],
                    "timeColumn": "time",
                    "where": [
                      {
                        "name": "$__timeFilter",
                        "params": [],
                        "type": "macro"
                      }
                    ]
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Broken Pairs",
                "type": "stat"
              },
              {
                "datasource": null,
                "fieldConfig": {
                  "defaults": {
                    "custom": {
                      "align": null,
                      "displayMode": "auto",
                      "filterable": false
                    },
                    "decimals": 2,
                    "mappings": [],
                    "thresholds": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "green",
                          "value": null
                        },
                        {
                          "color": "red",
                          "value": 80
                        }
                      ]
                    }
                  },
                  "overrides": [
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "createdAt"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 239
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "endedAt"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 241
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "buyPrice"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 86
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "buyQty"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 99
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "buyFilled"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 104
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "sellPrice"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 75
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "sellQty"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 98
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "sellFilled"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 98
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "revPrice"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 76
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "revQty"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 95
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "revFilled"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 93
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "revStatus"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 77
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "fees"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 59
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "btcReturn"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 99
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        },
                        {
                          "id": "custom.align",
                          "value": "right"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "btcUsdReturn"
                      },
                      "properties": [
                        {
                          "id": "noValue",
                          "value": "-"
                        },
                        {
                          "id": "custom.width",
                          "value": 110
                        },
                        {
                          "id": "custom.align",
                          "value": "right"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "usdReturn"
                      },
                      "properties": [
                        {
                          "id": "noValue",
                          "value": "-"
                        },
                        {
                          "id": "custom.width",
                          "value": 80
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "direction"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 78
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "totalReturn"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 92
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "uuid"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 299
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "status"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 100
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "statusDetails"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 354
                        }
                      ]
                    }
                  ]
                },
                "gridPos": {
                  "h": 6,
                  "w": 20,
                  "x": 4,
                  "y": 30
                },
                "id": 46,
                "options": {
                  "showHeader": true,
                  "sortBy": [
                    {
                      "desc": true,
                      "displayName": "endedAt"
                    }
                  ]
                },
                "pluginVersion": "7.3.5",
                "targets": [
                  {
                    "format": "table",
                    "group": [],
                    "metricColumn": "none",
                    "rawQuery": true,
                    "rawSql": "select\n    \"uuid\",\n    \"createdAt\",\n    \"endedAt\",\n    \"statusDetails\",\n    \"direction\",\n    case when \"buyPrice\" <> '0' then \"buyPrice\" end as \"buyPrice\",\n    case when \"sellPrice\" <> '0' then \"sellPrice\" end as \"sellPrice\",\n    case when \"revPrice\" <> '0' then \"revPrice\" end as \"revPrice\",\n    case when \"buyQty\" <> '0' then \"buyQty\" end as \"buyQty\",\n    case when \"sellQty\" <> '0' then \"sellQty\" end as \"sellQty\",\n    case when \"revFunds\" <> '0' then \"revFunds\" end as \"revFunds\",\n    case when \"buyFilled\" <> '0' then \"buyFilled\" end as \"buyFilled\",\n    case when \"sellFilled\" <> '0' then \"sellFilled\" end as \"sellFilled\",\n    case when \"revFilled\" <> '0' then \"revFilled\" end as \"revFilled\",\n    case when \"btcReturn\"<> '0' then \"btcReturn\" end as \"btcReturn\",\n    case when (\"btcReturn\" * \"firstPrice\") <> '0' then (\"btcReturn\" * \"firstPrice\") end as \"btcUsdReturn\",\n    case when \"usdReturn\" <> '0' then \"usdReturn\" end as \"usdReturn\",\n    case when \"fees\" <> '0' then \"fees\" end as \"fees\",\n    case when (\"usdReturn\") + (\"btcReturn\" * \"firstPrice\") - fees <> 0 then (\"usdReturn\") + (\"btcReturn\" * \"firstPrice\") - fees end as \"totalReturn\"\nfrom (\n    select\n        *,\n        case \n            when \"status\" = 'SUCCESS' then \"buyFilled\" - \"sellFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'DOWN' then \"revFilled\" - \"buyFilled\" - \"sellFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'UP' then \"buyFilled\" - \"sellFilled\" - \"revFilled\"\n            else 0\n        end as \"btcReturn\",\n        case \n            when \"status\" = 'SUCCESS' then \"sellPrice\" * \"sellFilled\" - \"buyPrice\" * \"buyFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'DOWN' then (\"sellPrice\" * \"sellFilled\" - \"buyPrice\" * \"buyFilled\") - \"revPrice\" * \"revFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'UP' then (\"revPrice\" * \"revFilled\") - ABS(\"sellPrice\" * \"sellFilled\" - \"buyPrice\" * \"buyFilled\")\n            else 0\n        end as \"usdReturn\"\n    from (\n        select\n            *,\n            case when \"direction\" = 'UP' then \"firstStatus\" else \"secondStatus\" end as \"buyStatus\",\n            case when \"direction\" = 'UP' then \"firstPrice\" else \"secondPrice\" end as \"buyPrice\",\n            case when \"direction\" = 'UP' then \"firstQty\" else \"secondQty\" end as \"buyQty\",\n            case when \"direction\" = 'UP' then \"firstFilled\" else \"secondFilled\" end as \"buyFilled\",\n            case when \"direction\" = 'UP' then \"firstFees\" else \"secondFees\" end as \"buyFees\",\n            \n            case when \"direction\" = 'DOWN' then \"firstStatus\" else \"secondStatus\" end as \"sellStatus\",\n            case when \"direction\" = 'DOWN' then \"firstPrice\" else \"secondPrice\" end as \"sellPrice\",\n            case when \"direction\" = 'DOWN' then \"firstQty\" else \"secondQty\" end as \"sellQty\",\n            case when \"direction\" = 'DOWN' then \"firstFilled\" else \"secondFilled\" end as \"sellFilled\",\n            case when \"direction\" = 'DOWN' then \"firstFees\" else \"secondFees\" end as \"sellFees\",\n            \"firstFees\" + \"secondFees\" + \"revFees\" as \"fees\"\n        from (\n            select \n                uuid,\n                data->>'createdAt' as \"createdAt\", \n                case when data->>'endedAt' = '0001-01-01T00:00:00Z' then '' else data->>'endedAt' end as \"endedAt\",\n                data->>'direction' as \"direction\",\n                data->>'status' as \"status\",\n                data->>'statusDetails' as \"statusDetails\",\n                \n                data->'firstOrder'->>'status' as \"firstStatus\",\n                data->'secondOrder'->>'status' as \"secondStatus\",\n                data->'reversalOrder'->>'status' as \"revStatus\",\n                (data->'firstRequest'->>'price')::decimal as \"firstPrice\",\n                (data->'secondRequest'->>'price')::decimal as \"secondPrice\",\n                (data->'reversalOrder'->'request'->>'price')::decimal as \"revPrice\",\n                (data->'firstRequest'->>'quantity')::decimal as \"firstQty\",\n                (data->'secondRequest'->>'quantity')::decimal as \"secondQty\",\n                (data->'reversalRequest'->>'funds')::decimal as \"revFunds\",\n                (data->'firstOrder'->>'filled')::decimal as \"firstFilled\",\n                (data->'secondOrder'->>'filled')::decimal as \"secondFilled\",\n                (data->'reversalOrder'->>'filled')::decimal as \"revFilled\",\n                (data->'reversalOrder'->>'fees')::decimal as \"revFees\",\n                (data->'secondOrder'->>'fees')::decimal as \"secondFees\",\n                (data->'firstOrder'->>'fees')::decimal as \"firstFees\"\n            from \n                orderpairs \n        ) as pairs\n    ) as \"pairsWithReturns\"\n) as pairReturns\n\nWHERE \"status\" = 'BROKEN'\nAND $__timeFilter(GREATEST(\"createdAt\", \"endedAt\"))",
                    "refId": "A",
                    "select": [
                      [
                        {
                          "params": [
                            "value"
                          ],
                          "type": "column"
                        }
                      ]
                    ],
                    "timeColumn": "time",
                    "where": [
                      {
                        "name": "$__timeFilter",
                        "params": [],
                        "type": "macro"
                      }
                    ]
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Broken Pairs",
                "type": "table"
              },
              {
                "datasource": null,
                "fieldConfig": {
                  "defaults": {
                    "custom": {
                      "align": null
                    },
                    "mappings": [],
                    "thresholds": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "super-light-blue",
                          "value": null
                        },
                        {
                          "color": "semi-dark-red",
                          "value": 1
                        }
                      ]
                    }
                  },
                  "overrides": [
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "uuid"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 340
                        }
                      ]
                    }
                  ]
                },
                "gridPos": {
                  "h": 6,
                  "w": 4,
                  "x": 0,
                  "y": 36
                },
                "id": 2,
                "options": {
                  "colorMode": "value",
                  "graphMode": "none",
                  "justifyMode": "auto",
                  "orientation": "auto",
                  "reduceOptions": {
                    "calcs": [
                      "mean"
                    ],
                    "fields": "",
                    "values": false
                  },
                  "textMode": "auto"
                },
                "pluginVersion": "7.3.5",
                "targets": [
                  {
                    "format": "table",
                    "group": [],
                    "metricColumn": "none",
                    "rawQuery": true,
                    "rawSql": "SELECT\n  count(1) as \"Failed Orders\"\nfrom  orderpairs\nWHERE\n  (data->>'status') = 'FAILED'\nand\n  $__timeFilter(data->>'createdAt')",
                    "refId": "A",
                    "select": [
                      [
                        {
                          "params": [
                            "value"
                          ],
                          "type": "column"
                        }
                      ]
                    ],
                    "timeColumn": "time",
                    "where": [
                      {
                        "name": "$__timeFilter",
                        "params": [],
                        "type": "macro"
                      }
                    ]
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Failed Pairs",
                "type": "stat"
              },
              {
                "datasource": null,
                "fieldConfig": {
                  "defaults": {
                    "custom": {
                      "align": null,
                      "displayMode": "auto",
                      "filterable": false
                    },
                    "decimals": 2,
                    "mappings": [],
                    "thresholds": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "green",
                          "value": null
                        },
                        {
                          "color": "red",
                          "value": 80
                        }
                      ]
                    }
                  },
                  "overrides": [
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "createdAt"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 239
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "endedAt"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 241
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "buyPrice"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 86
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "buyQty"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 99
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "buyFilled"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 104
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "sellPrice"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 75
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "sellQty"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 98
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "sellFilled"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 98
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "revPrice"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 76
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "revQty"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 95
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "revFilled"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 93
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "revStatus"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 77
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "fees"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 59
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "btcReturn"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 99
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        },
                        {
                          "id": "custom.align",
                          "value": "right"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "btcUsdReturn"
                      },
                      "properties": [
                        {
                          "id": "noValue",
                          "value": "-"
                        },
                        {
                          "id": "custom.width",
                          "value": 110
                        },
                        {
                          "id": "custom.align",
                          "value": "right"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "usdReturn"
                      },
                      "properties": [
                        {
                          "id": "noValue",
                          "value": "-"
                        },
                        {
                          "id": "custom.width",
                          "value": 80
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "direction"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 86
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "totalReturn"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 92
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "uuid"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 294
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "status"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 100
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "statusDetails"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 416
                        }
                      ]
                    }
                  ]
                },
                "gridPos": {
                  "h": 6,
                  "w": 20,
                  "x": 4,
                  "y": 36
                },
                "id": 47,
                "options": {
                  "showHeader": true,
                  "sortBy": [
                    {
                      "desc": true,
                      "displayName": "endedAt"
                    }
                  ]
                },
                "pluginVersion": "7.3.5",
                "targets": [
                  {
                    "format": "table",
                    "group": [],
                    "metricColumn": "none",
                    "rawQuery": true,
                    "rawSql": "select\n    \"uuid\",\n    \"createdAt\",\n    \"endedAt\",\n    \"statusDetails\",\n    \"direction\",\n    case when \"buyPrice\" <> '0' then \"buyPrice\" end as \"buyPrice\",\n    case when \"sellPrice\" <> '0' then \"sellPrice\" end as \"sellPrice\",\n    case when \"revPrice\" <> '0' then \"revPrice\" end as \"revPrice\",\n    case when \"buyQty\" <> '0' then \"buyQty\" end as \"buyQty\",\n    case when \"sellQty\" <> '0' then \"sellQty\" end as \"sellQty\",\n    case when \"revFunds\" <> '0' then \"revFunds\" end as \"revFunds\",\n    case when \"buyFilled\" <> '0' then \"buyFilled\" end as \"buyFilled\",\n    case when \"sellFilled\" <> '0' then \"sellFilled\" end as \"sellFilled\",\n    case when \"revFilled\" <> '0' then \"revFilled\" end as \"revFilled\",\n    case when \"btcReturn\"<> '0' then \"btcReturn\" end as \"btcReturn\",\n    case when (\"btcReturn\" * \"firstPrice\") <> '0' then (\"btcReturn\" * \"firstPrice\") end as \"btcUsdReturn\",\n    case when \"usdReturn\" <> '0' then \"usdReturn\" end as \"usdReturn\",\n    case when \"fees\" <> '0' then \"fees\" end as \"fees\",\n    case when (\"usdReturn\") + (\"btcReturn\" * \"firstPrice\") - fees <> 0 then (\"usdReturn\") + (\"btcReturn\" * \"firstPrice\") - fees end as \"totalReturn\"\nfrom (\n    select\n        *,\n        case \n            when \"status\" = 'SUCCESS' then \"buyFilled\" - \"sellFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'DOWN' then \"revFilled\" - \"buyFilled\" - \"sellFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'UP' then \"buyFilled\" - \"sellFilled\" - \"revFilled\"\n            else 0\n        end as \"btcReturn\",\n        case \n            when \"status\" = 'SUCCESS' then \"sellPrice\" * \"sellFilled\" - \"buyPrice\" * \"buyFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'DOWN' then (\"sellPrice\" * \"sellFilled\" - \"buyPrice\" * \"buyFilled\") - \"revPrice\" * \"revFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'UP' then (\"revPrice\" * \"revFilled\") - ABS(\"sellPrice\" * \"sellFilled\" - \"buyPrice\" * \"buyFilled\")\n            else 0\n        end as \"usdReturn\"\n    from (\n        select\n            *,\n            case when \"direction\" = 'UP' then \"firstStatus\" else \"secondStatus\" end as \"buyStatus\",\n            case when \"direction\" = 'UP' then \"firstPrice\" else \"secondPrice\" end as \"buyPrice\",\n            case when \"direction\" = 'UP' then \"firstQty\" else \"secondQty\" end as \"buyQty\",\n            case when \"direction\" = 'UP' then \"firstFilled\" else \"secondFilled\" end as \"buyFilled\",\n            case when \"direction\" = 'UP' then \"firstFees\" else \"secondFees\" end as \"buyFees\",\n            \n            case when \"direction\" = 'DOWN' then \"firstStatus\" else \"secondStatus\" end as \"sellStatus\",\n            case when \"direction\" = 'DOWN' then \"firstPrice\" else \"secondPrice\" end as \"sellPrice\",\n            case when \"direction\" = 'DOWN' then \"firstQty\" else \"secondQty\" end as \"sellQty\",\n            case when \"direction\" = 'DOWN' then \"firstFilled\" else \"secondFilled\" end as \"sellFilled\",\n            case when \"direction\" = 'DOWN' then \"firstFees\" else \"secondFees\" end as \"sellFees\",\n            \"firstFees\" + \"secondFees\" + \"revFees\" as \"fees\"\n        from (\n            select \n                uuid,\n                data->>'createdAt' as \"createdAt\", \n                case when data->>'endedAt' = '0001-01-01T00:00:00Z' then '' else data->>'endedAt' end as \"endedAt\",\n                data->>'direction' as \"direction\",\n                data->>'status' as \"status\",\n                data->>'statusDetails' as \"statusDetails\",\n                \n                data->'firstOrder'->>'status' as \"firstStatus\",\n                data->'secondOrder'->>'status' as \"secondStatus\",\n                data->'reversalOrder'->>'status' as \"revStatus\",\n                (data->'firstRequest'->>'price')::decimal as \"firstPrice\",\n                (data->'secondRequest'->>'price')::decimal as \"secondPrice\",\n                (data->'reversalOrder'->'request'->>'price')::decimal as \"revPrice\",\n                (data->'firstRequest'->>'quantity')::decimal as \"firstQty\",\n                (data->'secondRequest'->>'quantity')::decimal as \"secondQty\",\n                (data->'reversalRequest'->>'funds')::decimal as \"revFunds\",\n                (data->'firstOrder'->>'filled')::decimal as \"firstFilled\",\n                (data->'secondOrder'->>'filled')::decimal as \"secondFilled\",\n                (data->'reversalOrder'->>'filled')::decimal as \"revFilled\",\n                (data->'reversalOrder'->>'fees')::decimal as \"revFees\",\n                (data->'secondOrder'->>'fees')::decimal as \"secondFees\",\n                (data->'firstOrder'->>'fees')::decimal as \"firstFees\"\n            from \n                orderpairs \n        ) as pairs\n    ) as \"pairsWithReturns\"\n) as pairReturns\n\nWHERE \"status\" = 'FAILED'\nAND $__timeFilter(GREATEST(\"createdAt\", \"endedAt\"))",
                    "refId": "A",
                    "select": [
                      [
                        {
                          "params": [
                            "value"
                          ],
                          "type": "column"
                        }
                      ]
                    ],
                    "timeColumn": "time",
                    "where": [
                      {
                        "name": "$__timeFilter",
                        "params": [],
                        "type": "macro"
                      }
                    ]
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Failed Pairs",
                "type": "table"
              },
              {
                "datasource": null,
                "fieldConfig": {
                  "defaults": {
                    "custom": {
                      "align": null
                    },
                    "mappings": [],
                    "thresholds": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "super-light-blue",
                          "value": null
                        }
                      ]
                    }
                  },
                  "overrides": [
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "uuid"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 340
                        }
                      ]
                    }
                  ]
                },
                "gridPos": {
                  "h": 6,
                  "w": 4,
                  "x": 0,
                  "y": 42
                },
                "id": 4,
                "options": {
                  "colorMode": "value",
                  "graphMode": "none",
                  "justifyMode": "auto",
                  "orientation": "auto",
                  "reduceOptions": {
                    "calcs": [
                      "mean"
                    ],
                    "fields": "",
                    "values": false
                  },
                  "textMode": "auto"
                },
                "pluginVersion": "7.3.5",
                "targets": [
                  {
                    "format": "table",
                    "group": [],
                    "metricColumn": "none",
                    "rawQuery": true,
                    "rawSql": "SELECT\n  count(1) as \"Total Orders\"\nfrom\n  orderpairs\nwhere\n  $__timeFilter(data->>'createdAt')",
                    "refId": "A",
                    "select": [
                      [
                        {
                          "params": [
                            "value"
                          ],
                          "type": "column"
                        }
                      ]
                    ],
                    "timeColumn": "time",
                    "where": [
                      {
                        "name": "$__timeFilter",
                        "params": [],
                        "type": "macro"
                      }
                    ]
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "All Pairs",
                "type": "stat"
              },
              {
                "datasource": null,
                "fieldConfig": {
                  "defaults": {
                    "custom": {
                      "align": null,
                      "displayMode": "auto",
                      "filterable": false
                    },
                    "decimals": 2,
                    "mappings": [],
                    "thresholds": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "green",
                          "value": null
                        },
                        {
                          "color": "red",
                          "value": 80
                        }
                      ]
                    }
                  },
                  "overrides": [
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "createdAt"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 239
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "endedAt"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 241
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "buyPrice"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 86
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "buyQty"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 99
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "buyFilled"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 104
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "sellPrice"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 75
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "sellQty"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 98
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "sellFilled"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 98
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "revPrice"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 76
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "revQty"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 95
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "revFilled"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 93
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "revStatus"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 77
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "fees"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 59
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "btcReturn"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 99
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        },
                        {
                          "id": "decimals",
                          "value": 8
                        },
                        {
                          "id": "custom.align",
                          "value": "right"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "btcUsdReturn"
                      },
                      "properties": [
                        {
                          "id": "noValue",
                          "value": "-"
                        },
                        {
                          "id": "custom.width",
                          "value": 110
                        },
                        {
                          "id": "custom.align",
                          "value": "right"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "usdReturn"
                      },
                      "properties": [
                        {
                          "id": "noValue",
                          "value": "-"
                        },
                        {
                          "id": "custom.width",
                          "value": 103
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "direction"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 86
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "totalReturn"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 92
                        },
                        {
                          "id": "noValue",
                          "value": "-"
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "uuid"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 288
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "status"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 100
                        }
                      ]
                    },
                    {
                      "matcher": {
                        "id": "byName",
                        "options": "revFunds"
                      },
                      "properties": [
                        {
                          "id": "custom.width",
                          "value": 102
                        }
                      ]
                    }
                  ]
                },
                "gridPos": {
                  "h": 6,
                  "w": 20,
                  "x": 4,
                  "y": 42
                },
                "id": 44,
                "options": {
                  "showHeader": true,
                  "sortBy": [
                    {
                      "desc": true,
                      "displayName": "createdAt"
                    }
                  ]
                },
                "pluginVersion": "7.3.5",
                "targets": [
                  {
                    "format": "table",
                    "group": [],
                    "metricColumn": "none",
                    "rawQuery": true,
                    "rawSql": "select\n    \"uuid\",\n    \"createdAt\",\n    \"endedAt\",\n    \"status\",\n    \"direction\",\n    case when \"buyPrice\" <> '0' then \"buyPrice\" end as \"buyPrice\",\n    case when \"sellPrice\" <> '0' then \"sellPrice\" end as \"sellPrice\",\n    case when \"revPrice\" <> '0' then \"revPrice\" end as \"revPrice\",\n    case when \"buyQty\" <> '0' then \"buyQty\" end as \"buyQty\",\n    case when \"sellQty\" <> '0' then \"sellQty\" end as \"sellQty\",\n    case when \"revFunds\" <> '0' then \"revFunds\" end as \"revFunds\",\n    case when \"buyFilled\" <> '0' then \"buyFilled\" end as \"buyFilled\",\n    case when \"sellFilled\" <> '0' then \"sellFilled\" end as \"sellFilled\",\n    case when \"revFilled\" <> '0' then \"revFilled\" end as \"revFilled\",\n    case when \"btcReturn\"<> '0' then \"btcReturn\" end as \"btcReturn\",\n    case when (\"btcReturn\" * \"firstPrice\") <> '0' then (\"btcReturn\" * \"firstPrice\") end as \"btcUsdReturn\",\n    case when \"usdReturn\" <> '0' then \"usdReturn\" end as \"usdReturn\",\n    case when \"fees\" <> '0' then \"fees\" end as \"fees\",\n    case when (\"usdReturn\") + (\"btcReturn\" * \"firstPrice\") - fees <> 0 then (\"usdReturn\") + (\"btcReturn\" * \"firstPrice\") - fees end as \"totalReturn\"\nfrom (\n    select\n        *,\n        case \n            when \"status\" = 'SUCCESS' then \"buyFilled\" - \"sellFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'DOWN' then \"revFilled\" - \"buyFilled\" - \"sellFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'UP' then \"buyFilled\" - \"sellFilled\" - \"revFilled\"\n            else 0\n        end as \"btcReturn\",\n        case \n            when \"status\" = 'SUCCESS' then \"sellPrice\" * \"sellFilled\" - \"buyPrice\" * \"buyFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'DOWN' then (\"sellPrice\" * \"sellFilled\" - \"buyPrice\" * \"buyFilled\") - \"revPrice\" * \"revFilled\"\n            when \"status\" = 'REVERSED' and \"direction\" = 'UP' then (\"revPrice\" * \"revFilled\") - ABS(\"sellPrice\" * \"sellFilled\" - \"buyPrice\" * \"buyFilled\")\n            else 0\n        end as \"usdReturn\"\n    from (\n        select\n            *,\n            case when \"direction\" = 'UP' then \"firstStatus\" else \"secondStatus\" end as \"buyStatus\",\n            case when \"direction\" = 'UP' then \"firstPrice\" else \"secondPrice\" end as \"buyPrice\",\n            case when \"direction\" = 'UP' then \"firstQty\" else \"secondQty\" end as \"buyQty\",\n            case when \"direction\" = 'UP' then \"firstFilled\" else \"secondFilled\" end as \"buyFilled\",\n            case when \"direction\" = 'UP' then \"firstFees\" else \"secondFees\" end as \"buyFees\",\n            \n            case when \"direction\" = 'DOWN' then \"firstStatus\" else \"secondStatus\" end as \"sellStatus\",\n            case when \"direction\" = 'DOWN' then \"firstPrice\" else \"secondPrice\" end as \"sellPrice\",\n            case when \"direction\" = 'DOWN' then \"firstQty\" else \"secondQty\" end as \"sellQty\",\n            case when \"direction\" = 'DOWN' then \"firstFilled\" else \"secondFilled\" end as \"sellFilled\",\n            case when \"direction\" = 'DOWN' then \"firstFees\" else \"secondFees\" end as \"sellFees\",\n            \"firstFees\" + \"secondFees\" + \"revFees\" as \"fees\"\n        from (\n            select \n                uuid,\n                data->>'createdAt' as \"createdAt\", \n                case when data->>'endedAt' = '0001-01-01T00:00:00Z' then '' else data->>'endedAt' end as \"endedAt\",\n                data->>'direction' as \"direction\",\n                data->>'status' as \"status\",\n                data->'firstOrder'->>'status' as \"firstStatus\",\n                data->'secondOrder'->>'status' as \"secondStatus\",\n                data->'reversalOrder'->>'status' as \"revStatus\",\n                (data->'firstRequest'->>'price')::decimal as \"firstPrice\",\n                (data->'secondRequest'->>'price')::decimal as \"secondPrice\",\n                (data->'reversalOrder'->'request'->>'price')::decimal as \"revPrice\",\n                (data->'firstRequest'->>'quantity')::decimal as \"firstQty\",\n                (data->'secondRequest'->>'quantity')::decimal as \"secondQty\",\n                (data->'reversalRequest'->>'funds')::decimal as \"revFunds\",\n                (data->'firstOrder'->>'filled')::decimal as \"firstFilled\",\n                (data->'secondOrder'->>'filled')::decimal as \"secondFilled\",\n                (data->'reversalOrder'->>'filled')::decimal as \"revFilled\",\n                (data->'reversalOrder'->>'fees')::decimal as \"revFees\",\n                (data->'secondOrder'->>'fees')::decimal as \"secondFees\",\n                (data->'firstOrder'->>'fees')::decimal as \"firstFees\"\n            from \n                orderpairs \n        ) as pairs\n    ) as \"pairsWithReturns\"\n) as pairReturns\n\nWHERE $__timeFilter(GREATEST(\"createdAt\", \"endedAt\"))",
                    "refId": "A",
                    "select": [
                      [
                        {
                          "params": [
                            "value"
                          ],
                          "type": "column"
                        }
                      ]
                    ],
                    "timeColumn": "time",
                    "where": [
                      {
                        "name": "$__timeFilter",
                        "params": [],
                        "type": "macro"
                      }
                    ]
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "All Pairs",
                "type": "table"
              }
            ],
            "refresh": "5s",
            "schemaVersion": 26,
            "style": "dark",
            "tags": [],
            "templating": {
              "list": []
            },
            "time": {
              "from": "now-7d",
              "to": "now"
            },
            "timepicker": {
              "refresh_intervals": [
                "1s",
                "5s",
                "10s",
                "30s",
                "1m"
              ]
            },
            "timezone": "",
            "title": "Moneytree Orders",
            "uid": "VWPq3IHGz",
            "version": 1
          }